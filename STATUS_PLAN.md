# Сверка с планом ERP_PLAN.md

## ✅ Реализовано

### Этап 1 (MVP)
| Задача | Статус |
|--------|--------|
| Настройка проекта и структуры | ✅ |
| База данных (JSON, все сущности из плана) | ✅ |
| Backend API: объекты, юниты | ✅ |
| Frontend: дашборд, объекты, юниты | ✅ |
| Базовые расчеты доходности | ✅ |
| Авторизация (регистрация/вход) | ✅ добавлено сверх плана |

### Этап 2 (Расширенная функциональность)
| Задача | Статус |
|--------|--------|
| Модуль арендаторов (API + UI) | ✅ |
| Модуль договоров аренды (API + UI) | ✅ |
| Плановые обязательные платежи (API) | ✅ |
| Фактические обязательные платежи (API) | ✅ |
| Платежи от арендаторов: генерация на месяц, отметка оплаты (API + UI) | ✅ |
| Финансовый учет — транзакции (API) | ✅ |
| Дашборд с переключателем План/Факт | ✅ |
| Страница «Платежи» (вкладки: от арендаторов / обязательные) | ✅ |

### Навигация (план 5.2)
| Пункт меню | Статус |
|------------|--------|
| Главная (Дашборд) | ✅ |
| Объекты | ✅ |
| Юниты | ✅ |
| Арендаторы | ✅ |
| Договоры | ✅ |
| Платежи | ✅ |

---

## ❌ Не хватает по плану

### Меню и страницы
| По плану | Сейчас | Нужно |
|----------|--------|--------|
| **Финансы** | Нет в меню | Страница «Финансы»: список транзакций, фильтры план/факт, добавление |
| **Отчеты** | Нет | Страница «Отчеты» или базовые отчеты (по объекту, по периоду) |
| **Настройки** | Нет | Опционально: профиль, смена пароля |

### Модуль обязательных платежей (UI)
- Сейчас: на странице «Платежи» только **просмотр** списка плановых обязательных платежей.
- По плану ещё нужно:
  - Форма **добавления/редактирования** планового платежа по юниту/объекту (тип, сумма, частота, is_cost).
  - Внесение **фактических сумм** по обязательным платежам по месяцам (как для платежей от арендаторов).

### Дашборд (план 5.1)
| Элемент по плану | Статус |
|------------------|--------|
| Переключатель План/Факт | ✅ |
| Карточки метрик (доходность, объекты, юниты, занятость, средняя за м²) | ✅ частично (нет явного «отклонения») |
| **График доходов за период** (линейный, план vs факт) | ❌ |
| **Таблица топ-5 объектов по доходности** | ❌ (есть общая таблица объектов) |
| **Календарь** (окончание договоров, период 1–30) | ❌ |
| **Виджет «Требуют внимания»** (просроченные платежи, неоплаченные) | ❌ |
| **Быстрые действия** (добавить объект, юнит, договор, внести платежи) | ❌ |

### Детальные экраны
| По плану | Статус |
|----------|--------|
| Карточка объекта (детальная) | ❌ только список |
| Карточка арендатора (переход по клику с юнита) | ❌ только список арендаторов |
| Карточка юнита с информацией об арендаторе | ❌ только таблица юнитов |

### Этап 3 (аналитика и оптимизация)
| Задача | Статус |
|--------|--------|
| Графики и диаграммы (Chart.js и т.п.) | ❌ |
| Экспорт отчетов (PDF, Excel) | ❌ |
| Уведомления/напоминания (просрочки, внесение факта) | ❌ |
| Автогенерация плановых платежей в начале месяца | ❌ (есть ручная кнопка) |

---

## Рекомендуемый порядок доработок

1. **Финансы** — страница + пункт меню (транзакции, фильтры, добавление).
2. **Обязательные платежи (UI)** — форма создания/редактирования планового платежа; внесение факта по месяцам.
3. **Дашборд** — график доходов за период, виджет «Требуют внимания», быстрые кнопки.
4. **Отчеты** — базовая страница (отчет по объектам, по периоду).
5. **Карточки** — детальный просмотр объекта и арендатора.
6. **Этап 3** — графики (Chart.js), экспорт, при желании уведомления.

Можно выбрать, с чего начать (например, Финансы + доработка обязательных платежей), и реализовать по шагам.
